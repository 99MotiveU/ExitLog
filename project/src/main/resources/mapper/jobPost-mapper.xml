<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
 <mapper namespace="com.exitlog.calendar.mapper.JobPostMapper">
	 <insert id="insertJobPost" parameterType="JobPost"> 
	 	INSERT INTO JOBPOST ( id, active, url, company_name, title, opening_date, expiration_date, location, job_code, job_code_name, experience_level, experience_level_name ) 
	 		VALUES(#{id},#{active},#{url},#{company},#{title},#{openingTimestamp}, #{expirationTimestamp},#{location},#{jobCode},#{jobCodeName}, #{experienceLevel},#{experienceLevelName}) 
	 </insert>
	 
	<delete id="deleteAllJobPosts"> 
		DELETE FROM JOBPOST 
	</delete>
	<select id="selectAll" resultType="JobPostDto"> 
		SELECT ID, ACTIVE, URL, COMPANY_NAME as company, TITLE, 
			OPENING_DATE, EXPIRATION_DATE, LOCATION, JOB_CODE_NAME, EXPERIENCE_LEVEL_NAME
		FROM JOBPOST 
	</select>
    
 	<select id="getTodayDeadline" resultType="JobPostDto">
		SELECT ID, ACTIVE, URL, COMPANY_NAME AS company, TITLE, 
		       OPENING_DATE, EXPIRATION_DATE, LOCATION, JOB_CODE_NAME, EXPERIENCE_LEVEL_NAME
		FROM JOBPOST
		WHERE DATE(EXPIRATION_DATE) = DATE(CONVERT_TZ(NOW(), '+00:00', '+09:00'))
	</select>
 </mapper>